---
import Layout from "../../layouts/Layout.astro";
import BentoCard from "../../components/BentoCard.astro";

import {
  getSortedActivity,
  getSortedMembers,
  getResearchFocus,
  getPublications,
} from "../../utils/collections";

export function getStaticPaths() {
  return [
    { params: { locale: "ja" } },
    { params: { locale: "en" } },
  ];
}

const activity = await getSortedActivity();
const members = await getSortedMembers();
const researchFocus = await getResearchFocus();
const publications = await getPublications();

import news from "../../data/news.yaml";
import { resolvePath, buildLocalizedPath } from "../../utils/paths";
import type { Locale } from "../../utils/paths";

const locale = (Astro.params.locale || "ja") as Locale;
const isJa = locale === "ja";

const contactLocationLines = (
  isJa
    ? "東京大学 本郷キャンパス\n工学部3号館 202号室"
    : "The University of Tokyo, Hongo Campus\nEngineering Bldg. 3 Room 202"
).split("\n");

// Hero text
const heroText = isJa
  ? "経済・社会に関する洞察とAI・データサイエンスの手法を組み合わせ、技術経営学の領域で新境地を切り開くことを目指しています。機械学習・深層学習、ネットワーク解析、自然言語処理等を中心に、大規模な学術ビッグデータやソーシャルメディア等の多様なデータを扱い、生成AIの解析にも先駆的に取り組んでいます。"
  : "We combine insights from economics and society with AI and data science to pioneer new ground in technology management. Our research centers on machine learning, deep learning, network analysis, and natural language processing, handling diverse data from large-scale scholarly corpora to social media, and leading pioneering work on generative AI analysis.";

// Lab Guidelines text
const guidelinesText = {
  intro: isJa
    ? "2009年にスタートし、開設15年になる我々の研究室では、経済・社会に関する洞察とAI・データサイエンスの手法を組み合わせることで、技術経営学の領域で新境地を切り開き、また、世界のトップチームの一つとなることを目指しています。分析手法としては、技術経営領域でもその活用が期待されている機械学習・深層学習、ネットワーク解析、自然言語処理等のデータサイエンス系の手法を中心とし、また、手法自体に関する基礎的な研究も重視しています。"
    : "Founded in 2009, our laboratory combines insights from economics and society with AI and data science to pioneer new ground in technology management and become one of the world's leading teams. We focus on data science methods such as machine learning, deep learning, network analysis, and natural language processing, while also emphasizing foundational research on these methodologies.",
  research: isJa
    ? "そうした手法を用いた考察の対象としては、大規模な学術ビックデータ、ソーシャルメディア、取引関係やM&A等を含む大規模な企業情報、列車を利用したトリップデータ、レビュー文など、様々なものを扱っています。生成AIに関しては、逆学習を用いたLLMの解析に先駆的に取り組んでいます。"
    : "We analyze diverse datasets including large-scale scholarly corpora, social media, corporate information covering transactions and M&A, passenger trip data, and review texts. We are also pioneers in analyzing large language models through inverse reinforcement learning.",
  collaboration: isJa
    ? "さらに、このような研究を進めるための外部連携として、「テクノロジー・インフォマティックス社会連携講座」や「事前学習言語モデルとネットワークの融合に基づく科学技術トレンド予測（NEDO/産業技術総合研究所）」の代表を務めるほか、多様な企業等と共同研究を行っています。"
    : "To advance our research, we lead initiatives such as the Technology Informatics Social Collaboration Program and the NEDO/AIST project on science and technology trend forecasting through the fusion of pretrained language models and network science, while collaborating with various industry partners.",
  outreach: isJa
    ? "研究に加えて、成果の発信や社会への貢献も重視しています。リサーチインテリジェンス等の国際会議で招待講演を行うほか、UTOKYO COMPASS推進に関する様々な活動（グローバル・コモンズ、ビジョン形成、SDGs国際シンポジウム）、地方創成策や国土計画の政策立案への参加をしています。また、学術ビックデータに関する開拓した技法群を実装したウエブシステム「学術俯瞰・未来予測システム」の東京大学内外への提供を行っています。さらに、「アントレプレナーシップ教育デザイン寄付講座」の運営を担っています。"
    : "Beyond research, we emphasize disseminating our findings and contributing to society. We deliver invited talks at international conferences on research intelligence, participate in UTOKYO COMPASS initiatives (Global Commons, vision formation, SDGs International Symposium), and contribute to regional revitalization and national planning policies. We also provide our Academic Landscape and Future Prediction System to institutions within and outside the University of Tokyo, and manage the Entrepreneurship Education Design Endowed Course.",
  students: isJa
    ? "学生のみなさんには、研究テーマの選定から、研究デザイン、分析、論文化まで、一連のプロセスを主体的にまわす経験をしてもらうことを重視しています。教員の側から研究テーマや研究計画の示唆をすることは控え、みなさんが自ら選んだテーマや設計した研究計画の支援に徹することとしています。こうしたことから、研究室内の研究テーマは実に多様なものとなっています。"
    : "We emphasize giving students hands-on experience driving the entire research process—from selecting a topic, designing the study, conducting analysis, to writing papers. Rather than suggesting research themes or plans, faculty focus on supporting the topics and plans students choose themselves. This approach results in remarkably diverse research themes within the lab.",
  conferences: isJa
    ? "また、学生のみなさんが学会での発表や国際経験を得ることも重視しています。国内については、人工知能学会や情報処理学会、言語処理学会等、データサイエンス系の学会において多数の発表を行っており、優秀賞を連続して受賞しています。海外においては、技術経営系の主要な国際会議（PICMET等）で多数の発表を行うほか、自然言語処理のトップカンファレンス（ACLやEMNLP）、ネットワーク科学系の国際会議（Complex NetworksやNetSci）、計算社会科学の国際会議（IC2S2）、サイエンス・オブ・サイエンスの国際会議（ICSSI）での発表実績が出ています。海外の提携校との交換留学も積極的に後押ししています。"
    : "We also value students gaining conference presentation and international experience. Domestically, our students present extensively at data science conferences such as JSAI, IPSJ, and NLP, consistently winning excellence awards. Internationally, we present at major technology management conferences (PICMET, etc.), top NLP venues (ACL, EMNLP), network science conferences (Complex Networks, NetSci), computational social science conferences (IC2S2), and science of science conferences (ICSSI). We actively support exchange programs with partner universities abroad.",
  closing: isJa
    ? "意欲ある学生のみなさんを待っています。"
    : "We look forward to welcoming motivated students.",
  signature: isJa
    ? "工学系研究科技術経営戦略学専攻 教授 坂田一郎"
    : "Ichiro Sakata, Professor, Department of Technology Management for Innovation, Graduate School of Engineering"
};

// Sort collections
members.sort((a, b) => a.data.order - b.data.order);
researchFocus.sort((a, b) => a.data.order - b.data.order);
// News is already in order in the hardcoded array
// Publications are already sorted in the list file
---

<Layout
  title={
    isJa
      ? "坂田・森・浅谷・西本研究室 | 東京大学"
      : "Sakata / Mori / Asatani / Nishimoto Laboratory | The University of Tokyo"
  }
>
  <!-- Hero Section (inline) -->
  <section class="hero">
    <div class="hero-container">
      <div class="hero-content">
        <p>{heroText} <a href={buildLocalizedPath(locale, "research")} class="hero-research-link">{isJa ? "→研究内容へ" : "→ Research"}</a></p>
      </div>
      <div class="hero-image">
        <img
          src={resolvePath("/images/DSC04189 IPAS写真7.JPG")}
          alt="Lab Research Insight"
          loading="eager"
          decoding="async"
          width="200"
          height="200"
        />
      </div>
    </div>
  </section>

  <div class="bento-grid">
    <!-- Lab Guidelines (Full Width, inline) -->
    <BentoCard
      title={isJa ? "研究室紹介" : "About Our Lab"}
      class="guidelines-card full-width"
    >
      <div class="guidelines-content collapsed" id="guidelines-content">
        <div class="guidelines-text">
          <p>{guidelinesText.intro}</p>
          <p>{guidelinesText.research}</p>
          <p>{guidelinesText.collaboration}</p>
          <p>{guidelinesText.outreach}</p>
          <p>{guidelinesText.students}</p>
          <p>{guidelinesText.conferences}</p>
          <p>{guidelinesText.closing}</p>
          <p style="text-align: right; margin-top: 1rem;">{guidelinesText.signature}</p>
        </div>
      </div>
      <button id="guidelines-toggle" class="guidelines-toggle" aria-label="Expand">...</button>
    </BentoCard>

    <!-- News Area (Left 2/3) -->
    <BentoCard
      title={isJa ? "ニュース" : "News"}
      class="news-card span-2 tall-1-4"
    >
      <div class="news-preview">
        {
          news
            .slice(0, 5)
            .map((item: { date: string; text: string; link?: string }) => (
              <div class="news-preview-item">
                <span class="date">{item.date}</span>
                {item.link ? (
                  <a
                    href={item.link}
                    target="_blank"
                    rel="noopener noreferrer"
                    class="text link"
                  >
                    {item.text}
                  </a>
                ) : (
                  <span class="text">{item.text}</span>
                )}
              </div>
            ))
        }
      </div>
      <a href={buildLocalizedPath(locale, "news")} class="view-all-link">
        {isJa ? "すべて見る →" : "View all →"}
      </a>
    </BentoCard>

    <!-- Members Area (Right 1/3) -->
    <BentoCard
      title={isJa ? "メンバー" : "Members"}
      class="members-card span-1 tall-1-4"
    >
      <div class="members-preview">
        {
          (() => {
            const faculty = members.find((g) => g.data.title === "教員");
            if (!faculty) return null;
            return (
              <div class="faculty-list">
                {faculty.data.items.map((member) => (
                  <a href={buildLocalizedPath(locale, `members/${member.id}`)} class="faculty-item-link">
                    <div class="faculty-item">
                      <img
                        src={resolvePath(member.image || "")}
                        alt={isJa ? member.name : (member.nameEn || member.name)}
                        class="faculty-avatar"
                        loading="lazy"
                        decoding="async"
                      />
                      <div class="faculty-info">
                        <div class="faculty-name-row">
                          <span class="faculty-name">{isJa ? member.name : (member.nameEn || member.name)}</span>
                          <span class="faculty-role">{isJa ? member.role : (member.roleEn || member.role)}</span>
                        </div>
                        {(isJa ? member.description : (member.descriptionEn || member.description)) && (
                          <p class="faculty-description">
                            {isJa ? member.description : (member.descriptionEn || member.description)}
                          </p>
                        )}
                      </div>
                    </div>
                  </a>
                ))}
              </div>
            );
          })()
        }
      </div>
      <a href={buildLocalizedPath(locale, "members")} class="view-all-link">
        {isJa ? "すべて見る →" : "View all →"}
      </a>
    </BentoCard>

    <!-- Publications Area -->
    <BentoCard
      title={isJa ? "論文" : "Publications"}
      class="publications-card full-width"
    >
      <div class="publications-list-compact">
        {
          publications
            .filter((p) => !p.hidden)
            .slice(0, 7)
            .map((pub) => (
              <div class="pub-item-compact">
                <span class="pub-year">{pub.year}</span>
                <span class="pub-title">{pub.title}</span>
                <span class="pub-venue">{pub.venue}</span>
              </div>
            ))
        }
      </div>
      <a
        href={buildLocalizedPath(locale, "publications")}
        class="view-all-link"
      >
        {isJa ? "すべて見る →" : "View all →"}
      </a>
    </BentoCard>

    {/* <!-- Research (Full Width) --> -->
    <BentoCard
      title={isJa ? "研究内容" : "Research"}
      class="research-card full-width tall-huge"
      href={buildLocalizedPath(locale, "research")}
    >
      <div class="research-preview">
        <h3>
          {isJa
            ? "技術経営学 / 計算社会科学 / 計算言語学"
            : "Technology Management / Computational Social Science / Computational Linguistics"}
        </h3>
        {isJa ? (
          <>
            <p class="line-clamp-3">
              2009年にスタートし、開設15年になる我々の研究室では、経済・社会に関する洞察とAI・データサイエンスの手法を組み合わせることで、技術経営学の領域で新境地を切り開き、また、世界のトップチームの一つとなることを目指しています。分析手法としては、技術経営領域でもその活用が期待されている機械学習・深層学習、ネットワーク解析、自然言語処理等のデータサイエンス系の手法を中心とし、また、手法自体に関する基礎的な研究も重視しています。
            </p>
            <p class="line-clamp-3">
              そうした手法を用いた考察の対象としては、大規模な学術ビックデータ、ソーシャルメディア、取引関係やM&A等を含む大規模な企業情報、列車を利用したトリップデータ、レビュー文など、様々なものを扱っています。生成AIに関しては、逆学習を用いたLLMの解析に先駆的に取り組んでいます。
            </p>
            <p class="line-clamp-3">
              さらに、このような研究を進めるための外部連携として、「テクノロジー・インフォマティックス社会連携講座」や「事前学習言語モデルとネットワークの融合に基づく科学技術トレンド予測（NEDO/産業技術総合研究所）」の代表を務めるほか、多様な企業等と共同研究を行っています。
            </p>
          </>
        ) : (
          <>
            <p class="line-clamp-3">
              Founded in 2009, our laboratory combines insights from economics
              and society with AI and data science to pioneer new ground in
              technology management and to become one of the leading teams
              worldwide. We focus on data-science approaches such as machine
              learning, deep learning, network analysis, and natural language
              processing, while also pursuing foundational work on these
              methodologies.
            </p>
            <p class="line-clamp-3">
              We analyze a diverse range of datasets, including large-scale
              scholarly corpora, social media, corporate information covering
              transactions and M&A, passenger trip data, and review texts. Our
              group is also among the first to study large language models
              through inverse reinforcement learning.
            </p>
            <p class="line-clamp-3">
              To accelerate these efforts we lead initiatives such as the
              Technology Informatics Social Collaboration Program and the
              NEDO/AIST project on trend forecasting that fuses pretrained
              language models with network science, and we collaborate with many
              industry partners.
            </p>
          </>
        )}
      </div>
    </BentoCard> */}

    <!-- Research Focus & Activity Boxes (Show 3 items: 1 Activity, 2 Research) -->
    {
      (() => {
        // Select 1 activity (e.g., the one with ID 20231114_01)
        const selectedActivity = activity.find((a) => a.id === "20250610_01");

        // Select 2 research focus items (e.g., order 1 and 2)
        const selectedResearch = researchFocus.filter(
          (r) => r.data.order === 1 || r.data.order === 2,
        );

        const mixedItems = [];
        if (selectedActivity) {
          const actData = selectedActivity.data;
          const actTitle = isJa 
            ? (actData.title_ja || actData.title) 
            : (actData.title_en || actData.title);
          const actDesc = isJa
            ? (actData.description_short || actData.description_ja || actData.description)
            : (actData.description_short_en || actData.description_en || actData.description);
          mixedItems.push({
            type: "activity",
            title: actTitle,
            description: actDesc,
            image: actData.image,
            link: buildLocalizedPath(locale, `activity/${selectedActivity.id}`),
            tags: [isJa ? "活動" : "Activity"],
          });
        }

        selectedResearch.forEach((r) => {
          const rData = r.data;
          const rTitle = isJa 
            ? (rData.title_ja || rData.title) 
            : (rData.title_en || rData.title);
          const rDesc = isJa
            ? (rData.description_short || rData.description_ja || rData.description)
            : (rData.description_short_en || rData.description_en || rData.description);
          mixedItems.push({
            type: "research",
            title: rTitle,
            description: rDesc,
            image: rData.image,
            link: buildLocalizedPath(locale, `research/${r.id}`),
            tags: [
              isJa ? "研究" : "Research",
              isJa ? "論文" : "Publications",
            ],
          });
        });

        return mixedItems.map((item) => (
          <BentoCard
            title={item.title}
            class="research-focus-card span-1 fixed-height"
            href={item.link}
          >
            <div class="focus-preview">
              {item.image && (
                <img
                  src={resolvePath(item.image)}
                  alt={item.title}
                  class="focus-image"
                  loading="lazy"
                  decoding="async"
                />
              )}
              <p class="line-clamp-3">{item.description}</p>
              <div class="focus-tags">
                {item.tags.map((tag) => (
                  <span class="focus-tag">{tag}</span>
                ))}
              </div>
            </div>
          </BentoCard>
        ));
      })()
    }

    <!-- Join Us (Left 2/3) -->
    <BentoCard
      title={isJa ? "新入生の方へ" : "For Prospective Students"}
      class="span-2"
      href={buildLocalizedPath(locale, "visit")}
    >
      <p>
        {isJa
          ? "研究室見学を随時受け付けています。研究会（月2回・火曜2限）や輪読会の見学を推奨しています。"
          : "We welcome lab visits anytime. Joining our monthly workshop (Tue 2nd period) or book club is recommended before applying."}
      </p>
      <p
        style="margin-top: 0.5rem;"
      >
        {isJa
          ? "どの教員に配属となっても同じ環境で指導を受けられます。"
          : "Regardless of the faculty advisor assignment, all students receive guidance in the same environment."}
      </p>
      <span class="read-more-link">
        {isJa ? "→ さらに読む" : "→ Read more"}
      </span>
    </BentoCard>

    <!-- Contact (Right 1/3) -->
    <BentoCard
      title={isJa ? "アクセス" : "Access"}
      id="contact"
      class="span-1"
    >
      <div class="contact-info">
        <div class="contact-row">
          <svg
            class="contact-icon"
            fill="none"
            stroke="currentColor"
            viewBox="0 0 24 24"
          >
            <path
              stroke-linecap="round"
              stroke-linejoin="round"
              stroke-width="2"
              d="M17.657 16.657L13.414 20.9a1.998 1.998 0 01-2.827 0l-4.244-4.243a8 8 0 1111.314 0z"
            ></path>
            <path
              stroke-linecap="round"
              stroke-linejoin="round"
              stroke-width="2"
              d="M15 11a3 3 0 11-6 0 3 3 0 016 0z"
            ></path>
          </svg>
          {
            contactLocationLines.map((segment, index) => (
              <>
                {segment}
                {index < contactLocationLines.length - 1 && <br />}
              </>
            ))
          }
        </div>
        <div class="contact-row">
          <svg
            class="contact-icon"
            fill="none"
            stroke="currentColor"
            viewBox="0 0 24 24"
          >
            <path
              stroke-linecap="round"
              stroke-linejoin="round"
              stroke-width="2"
              d="M3 8l7.89 5.26a2 2 0 002.22 0L21 8M5 19h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v10a2 2 0 002 2z"
            ></path>
          </svg>
          info@ipr-ctr.t.u-tokyo.ac.jp
        </div>
      </div>
    </BentoCard>
  </div>
</Layout>

<style>
  .bento-grid {
    display: grid;
    grid-template-columns: repeat(3, 1fr);
    gap: 1.5rem;
    max-width: 1200px;
    margin: 0 auto;
    padding: 2rem 0 ;
  }

  /* Specific Card Styles */
  :global(.bento-card.full-width) {
    grid-column: 1 / -1;
  }

  :global(.bento-card.large) {
    min-height: 300px;
  }

  :global(.bento-card.wide) {
    grid-column: span 2;
    min-height: 200px;
  }

  :global(.bento-card.span-1) {
    grid-column: span 1;
  }

  :global(.bento-card.span-2) {
    grid-column: span 2;
  }

  .research-preview h3,
  .visit-preview h3 {
    font-size: 1.1rem;
    color: var(--accent);
    margin-bottom: 0.5rem;
  }

  .news-preview {
    display: flex;
    flex-direction: column;
    gap: 0.8rem;
  }

  .news-preview-item {
    display: flex;
    gap: 1rem;
    font-size: 0.9rem;
  }

  .news-preview-item .date {
    color: var(--text-muted);
    font-family: var(--font-mono);
    white-space: nowrap;
  }

  .news-preview-item .text.link {
    text-decoration: underline;
    text-decoration-color: var(--accent);
    text-underline-offset: 2px;
    color: inherit;
  }

  .news-preview-item .text.link:hover {
    color: var(--accent);
  }

  .view-all-link {
    display: inline-block;
    margin-top: 1rem;
    font-size: 0.85rem;
    color: var(--accent);
    text-decoration: none;
    font-weight: 500;
    transition: transform 0.2s ease;
  }

  .view-all-link:hover {
    transform: translateX(4px);
  }

  .read-more-link {
    display: inline-block;
    margin-top: 1rem;
    font-size: 0.85rem;
    color: var(--accent);
    font-weight: 500;
  }

  @media (max-width: 768px) {
    .bento-grid {
      grid-template-columns: 1fr;
    }

    :global(.bento-card.wide),
    :global(.bento-card.large) {
      grid-column: span 1;
    }
  }

  /* Keywords */
  .keywords {
    display: flex;
    flex-wrap: wrap;
    gap: 0.4rem;
    margin-top: 0.75rem;
  }

  .keyword {
    background: var(--bg-secondary);
    border: 1px solid var(--border);
    padding: 0.25rem 0.6rem;
    border-radius: 4px;
    font-size: 0.7rem;
    color: var(--text-secondary);
  }

  /* Contact card */
  .contact-info {
    margin-top: 0.5rem;
  }

  .contact-row {
    display: flex;
    align-items: flex-start;
    gap: 0.6rem;
    margin-bottom: 0.6rem;
    font-size: 0.8rem;
    color: var(--text-secondary);
    line-height: 1.5;
  }

  .contact-icon {
    color: var(--accent-light);
    width: 14px;
    flex-shrink: 0;
    margin-top: 2px;
  }

  /* News List */
  .news-list {
    display: flex;
    flex-direction: column;
    gap: 0.75rem;
    margin-top: 0.5rem;
  }

  :global(.bento-card.expanded) .news-list {
    display: grid;
    grid-template-columns: repeat(auto-fill, minmax(350px, 1fr));
    gap: 1rem;
  }

  /* Pub List */
  .pub-list {
    display: flex;
    flex-direction: column;
    gap: 1rem;
    margin-top: 0.5rem;
  }

  :global(.bento-card.expanded) .pub-list {
    display: grid;
    grid-template-columns: repeat(auto-fill, minmax(320px, 1fr));
    gap: 1rem;
  }

  /* Research Focus Links */
  .research-focus-link {
    text-decoration: none;
    color: inherit;
    display: block;
    transition: transform 0.2s ease;
  }

  .research-focus-link:hover {
    transform: translateY(-2px);
  }

  .focus-preview p,
  .activity-preview p {
    font-size: 0.9rem;
    color: var(--text-secondary);
    line-height: 1.6;
    margin-bottom: 1rem;
  }

  .focus-image {
    width: 100%;
    height: 120px;
    object-fit: cover;
    border-radius: 6px;
    margin-bottom: 1rem;
    border: 1px solid var(--border);
  }

  .focus-tags {
    display: flex;
    gap: 0.5rem;
    flex-wrap: wrap;
  }

  .focus-tag {
    font-size: 0.7rem;
    padding: 0.15rem 0.5rem;
    background: var(--bg-secondary);
    border: 1px solid var(--border);
    border-radius: 12px;
    color: var(--text-secondary);
  }

  .focus-full {
    animation: fadeIn 0.3s ease;
  }

  @keyframes fadeIn {
    from {
      opacity: 0;
    }
    to {
      opacity: 1;
    }
  }

  @media (max-width: 900px) {
    .bento-grid {
      grid-template-columns: 1fr;
      padding: 1rem;
      gap: 1rem;
    }

    :global(.bento-card.span-2),
    :global(.bento-card.wide),
    :global(.bento-card.large),
    :global(.bento-card.full-width) {
      grid-column: span 1;
    }

    :global(.bento-card.expanded) .pub-list,
    :global(.bento-card.expanded) .news-list {
      grid-template-columns: 1fr;
    }

    .publications-preview {
      grid-template-columns: 1fr;
    }
  }

  @media (max-width: 600px) {
    .bento-grid {
      padding: 0;
      gap: 0.75rem;
    }
  }

  /* Faculty Preview */
  .faculty-list {
    display: flex;
    flex-direction: column;
    gap: 0.8rem;
  }

  .faculty-item-link {
    text-decoration: none;
    color: inherit;
    display: block;
    transition: opacity 0.2s ease;
  }

  .faculty-item-link:hover {
    opacity: 0.8;
  }

  .faculty-item-link:hover .faculty-name {
    color: var(--accent);
  }

  .faculty-item {
    display: flex;
    align-items: flex-start;
    gap: 0.6rem;
  }

  .faculty-avatar {
    width: 40px;
    height: 40px;
    border-radius: 50%;
    object-fit: cover;
    border: 1px solid var(--border);
    flex-shrink: 0;
    margin-top: 2px;
  }

  .faculty-info {
    display: flex;
    flex-direction: column;
    gap: 0.2rem;
  }

  .faculty-name-row {
    display: flex;
    align-items: baseline;
    gap: 0.5rem;
  }

  .faculty-name {
    font-size: 0.9rem;
    font-weight: 500;
    color: var(--text-primary);
  }

  .faculty-role {
    font-size: 0.75rem;
    color: var(--text-muted);
  }

  .faculty-description {
    font-size: 0.75rem;
    color: var(--text-secondary);
    line-height: 1.4;
    display: -webkit-box;
    -webkit-line-clamp: 1;
    -webkit-box-orient: vertical;
    overflow: hidden;
  }

  /* Publications Preview */
  .publications-preview {
    display: flex;
    overflow-x: auto;
    gap: 1.5rem;
    padding-bottom: 1rem; /* Space for scrollbar */
    scrollbar-width: thin;
  }

  .publications-preview::-webkit-scrollbar {
    height: 6px;
  }

  .publications-preview::-webkit-scrollbar-thumb {
    background-color: var(--border);
    border-radius: 3px;
  }

  .pub-preview-item {
    display: flex;
    flex-direction: column;
    gap: 0.4rem;
    min-width: 300px;
    flex-shrink: 0;
  }

  .pub-meta {
    display: flex;
    gap: 0.5rem;
    align-items: center;
  }

  .pub-year {
    font-family: var(--font-mono);
    font-size: 0.75rem;
    color: var(--text-muted);
  }

  .pub-category {
    font-size: 0.7rem;
    padding: 0.15rem 0.5rem;
    background: var(--bg-secondary);
    border: 1px solid var(--border);
    border-radius: 3px;
    color: var(--text-secondary);
    text-transform: uppercase;
  }

  .pub-title {
    font-size: 0.85rem;
    /* font-weight: 600; */
    color: var(--text-primary);
    line-height: 1.4;
    margin: 0;
  }

  .pub-authors {
    font-size: 0.75rem;
    color: var(--text-secondary);
    margin: 0;
  }

  .pub-venue {
    font-size: 0.75rem;
    color: var(--text-muted);
    font-style: italic;
    margin: 0;
  }

  @media (max-width: 900px) {
    .publications-preview {
      grid-template-columns: 1fr;
    }
  }

  .publications-list-compact {
    display: flex;
    flex-direction: column;
    gap: 0.8rem;
  }

  .pub-item-compact {
    display: flex;
    align-items: baseline;
    gap: 1rem;
    font-size: 0.9rem;
    line-height: 1.4;
  }

  .pub-item-compact .pub-year {
    font-family: var(--font-mono);
    color: var(--text-muted);
    white-space: nowrap;
    flex-shrink: 0;
  }

  .pub-item-compact .pub-title {
    color: var(--text-primary);
    overflow: hidden;
    text-overflow: ellipsis;
    white-space: nowrap;
  }

  .pub-item-compact .pub-venue {
    color: var(--text-muted);
    font-size: 0.9rem;
    flex-shrink: 0;
    white-space: nowrap;
  }

  /* Hero Section Styles */
  .hero {
    padding: 0rem 0 0rem;
    border-bottom: 1px solid var(--border);
    margin-bottom: 0rem;
  }

  .hero-container {
    max-width: 1200px;
    margin: 0 auto;
    padding: 0rem 1rem;
    display: flex;
    gap: 3rem;
    align-items: center;
  }

  .hero-content {
    flex: 1;
  }

  .hero-image {
    flex: 0 0 200px;
  }

  .hero-image img {
    width: 100%;
    height: auto;
    border-radius: 12px;
    box-shadow: 0 8px 24px rgba(0, 0, 0, 0.12);
  }

  .hero p {
    font-size: 0.95rem;
    color: var(--text-secondary);
    line-height: 1.9;
  }

  .hero-research-link {
    display: inline-block;
    margin-left: 0.5rem;
    color: var(--accent);
    text-decoration: none;
    font-weight: 500;
    transition: transform 0.2s ease;
  }

  .hero-research-link:hover {
    transform: translateX(4px);
  }

  @media (max-width: 900px) {
    .hero-container {
      flex-direction: column;
      gap: 2rem;
    }

    .hero-image {
      flex: 0 0 auto;
      width: 50%;
      max-width: 200px;
    }
  }

  @media (max-width: 600px) {
    .hero-container {
      padding: 1rem 0rem;
    }
  }

  /* Lab Guidelines Styles */
  .guidelines-text {
    font-size: 0.95rem;
    line-height: 1.8;
    color: var(--text-secondary);
  }

  .guidelines-text p {
    margin-bottom: 1rem;
  }

  .guidelines-content {
    transition: max-height 0.3s ease;
    overflow: hidden;
  }

  .guidelines-content.collapsed {
    max-height: 126px;
    mask-image: linear-gradient(to bottom, black 50%, transparent 100%);
  }

  .guidelines-toggle {
    display: block;
    width: 100%;
    padding: 0.5rem;
    background: none;
    border: none;
    color: var(--accent);
    font-size: 1rem;
    cursor: pointer;
    line-height: 1;
    margin-top: 0.5rem;
  }

  .guidelines-toggle:hover {
    color: var(--accent-light);
  }
</style>

<script>
  const toggleBtn = document.getElementById("guidelines-toggle");
  const content = document.getElementById("guidelines-content");

  if (toggleBtn && content) {
    toggleBtn.addEventListener("click", () => {
      content.classList.toggle("collapsed");
      toggleBtn.textContent = content.classList.contains("collapsed")
        ? "..."
        : "Close";
    });
  }
</script>
